x = c('rvest','stringr','httr','tmcn','qdap','Rwordseg',
'tm','plyr','wordcloud2','tidyverse','lsmeans')
lapply(x,require,character.onlu=TRUE)
x = c('rvest','stringr','httr','tmcn','qdap','Rwordseg',
'tm','plyr','wordcloud2','tidyverse','lsmeans')
lapply(x,require,character.only=TRUE)
x = c('rvest','stringr','httr','tmcn','qdap','Rwordseg',
'tm','plyr','wordcloud2','tidyverse','Ismeans')
lapply(x,require,character.only=TRUE)
url
urlp = "https://tieba.baidu.com/f?kw=心理学&ie=utf-8&pn="
url = c()
for (i i 1:101){
urlp = "https://tieba.baidu.com/f?kw=心理学&ie=utf-8&pn="
url = c()
for (i in 1:101){
page = i*50 -50
url = c(paste0(urlp,page),url)}
url
urlp = "https://tieba.baidu.com/f?kw=心理学&ie=utf-8&pn="
url = c()
for (i in 0:100){
page = (i)*50
url = c(paste0(urlp,page),url)}
url
urlp = "https://tieba.baidu.com/f?kw=心理学&ie=utf-8&pn="
url = c()
for (i in 0:100){
page = i*50
url = c(paste0(urlp,page),url)}
url
webdata = data.frame()
for (i in 1:100){
load(file)
title = read_html(webdata)%>%html_nodes('a.j_th_tit')%>%html_text()
comment = read_html(webdata)%>%html_nodes('span.threadlist_rep_num.center_text')%>%html_text()
lastcom = read_html(webdata)%>%html_nodes('.j_reply_data')%>%html_text()%>%str_extract_all('\\d+[:|-]\\d+')%>%unlist()
lastcom = gsub('\\d+:\\d+','5-31',lastcom)
webdata = rbind(webdata,data.frame(comment,title,lastcom,stringsAsFactors = FALSE) )
}
webdata = data.frame()
for (i in 1:100){
load(pste0("web",K,".Rdata")
title = read_html(webdata)%>%html_nodes('a.j_th_tit')%>%html_text()
webdata = data.frame()
for (i in 1:100){
load(pste0("web",K,".Rdata"))
title = read_html(webdata)%>%html_nodes('a.j_th_tit')%>%html_text()
comment = read_html(webdata)%>%html_nodes('span.threadlist_rep_num.center_text')%>%html_text()
lastcom = read_html(webdata)%>%html_nodes('.j_reply_data')%>%html_text()%>%str_extract_all('\\d+[:|-]\\d+')%>%unlist()
lastcom = gsub('\\d+:\\d+','5-31',lastcom)
webdata = rbind(webdata,data.frame(comment,title,lastcom,stringsAsFactors = FALSE) )
}
for (i in 1:100){
load(paste0("web",K,".Rdata"))
title = read_html(webdata)%>%html_nodes('a.j_th_tit')%>%html_text()
comment = read_html(webdata)%>%html_nodes('span.threadlist_rep_num.center_text')%>%html_text()
lastcom = read_html(webdata)%>%html_nodes('.j_reply_data')%>%html_text()%>%str_extract_all('\\d+[:|-]\\d+')%>%unlist()
lastcom = gsub('\\d+:\\d+','5-31',lastcom)
webdata = rbind(webdata,data.frame(comment,title,lastcom,stringsAsFactors = FALSE) )
}
for (k in 1:100){
webcode = get(url[k]
Sys.sleep(runif(1,2,3))
for (k in 1:100){
webcode = get(url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata")))
for (k in 1:100){
webcode = get(url[k]))
for (k in 1:100){
webcode = get(url[k]))
for (k in 1:100){
webcode = get(url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata")))
for (k in 1:100){
webcode = get(url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata")))
for (k in 1:100){
webcode = get(url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata"))
}
urlp = "https://tieba.baidu.com/f?kw=心理学&ie=utf-8&pn="
url = c()
for (i in 0:100){
page = i*50
url = c(paste0(urlp,page),url)}
url
for (k in 1:100){
webcode = GET(url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata"))
}
for (k in 1:100){
webcode = GET(url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata"))
}
for (k in 1:100){
#webcode = GET(url[k])
webcode =  RETRY("GET", url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata"))
}
for (k in 1:10){
webcode = GET(url[k])
# webcode =  RETRY("GET", url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata"))
}
x = c('rvest','stringr','httr','tmcn','qdap','Rwordseg',
'tm','plyr','wordcloud2','tidyverse','Ismeans')
lapply(x,require,character.only=TRUE)
for (k in 1:10){
webcode = GET(url[k])
# webcode =  RETRY("GET", url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata"))
}
load("/Users/lujiawen/Desktop/crawler/web1.Rdata")
View(webdata)
View(webdata)
View(webcode)
#load package
```{r}
x = c('rvest','stringr','httr','tmcn','qdap','Rwordseg',
'tm','plyr','wordcloud2','tidyverse','Ismeans')
lapply(x,require,character.only=TRUE)
```
# create url
```{r}
urlp = "https://tieba.baidu.com/f?kw=心理学&ie=utf-8&pn="
url = c()
for (i in 0:100){
page = i*50
url = c(paste0(urlp,page),url)}
url
```
# get web data
```{r}
for (k in 1:100){
webcode = GET(url[k])
# webcode =  RETRY("GET", url[k])
Sys.sleep(runif(1,2,3))
save(webcode,file = paste0("web",k,".Rdata"))
}
```
# create data frame
# 构建一个空数据框，然后通过load命令把所有数据导入R，接着通过rvest的read_html命令读取网页的所有节点，并通过管道函数%>%连接另一个命令html_nodes 抽取想要的节点，最后通过html_text命令得到想要的文本信息。
load(web2.Rdata)
```{r}
webdata = data.frame()
for (i in 1:100){
load(paste0("web",i,".Rdata"))
title = read_html(webdata)%>%html_nodes('a.j_th_tit')%>%html_text()
comment = read_html(webdata)%>%html_nodes('span.threadlist_rep_num.center_text')%>%html_text()
lastcom = read_html(webdata)%>%html_nodes('.j_reply_data')%>%html_text()%>%str_extract_all('\\d+[:|-]\\d+')%>%unlist()
lastcom = gsub('\\d+:\\d+','5-31',lastcom)
webdata = rbind(webdata,data.frame(comment,title,lastcom,stringsAsFactors = FALSE) )
}
```
load(web2.Rdata)
load("web2.Rdata")
View(webdata)
load("/Users/lujiawen/Desktop/crawler/web7.Rdata")
View(webdata)
View(webcode)
x = c('rvest','stringr','httr','tmcn','qdap','Rwordseg',
'tm','plyr','wordcloud2','tidyverse','Ismeans')
lapply(x,require,character.only=TRUE)
data(NTUSD)
positive = NTUSD[[1]]
library(tmcn)
install.packages("tmcn")
install.packages("tmcn", repos = "http://R-Forge.R-project.org")
install.packages("tmcn", repos = "http://R-Forge.R-project.org")
data(NTUSD)
positive = NTUSD[[1]]
data(NTUSD)
positive = NTUSD[[1]]
library(tmcn)
data(GBK)
data(GBK)
data(GBK)
head(GBK)
data(NTUSD)
head(NTUSD)
data(NTUSD)
# head(NTUSD)
positive = NTUSD[[1]]
negative = NTUSD[[2]]
insertwords(positive)
install.packages("Rwordseg",repos="http://R-Forge.R-project.org")
install.packages("~/Library/Mobile Documents/com~apple~CloudDocs/edin-courses/输入/R/rpackages/Rwordseg/R/Rwordseg", repos = NULL)
library(Rwordseg)
install.packages("~/Library/Mobile Documents/com~apple~CloudDocs/edin-courses/输入/R/rpackages/Rwordseg/R/Rwordseg", repos = NULL)
library(Rwordseg)
library(Rwordseg)
install.packages("rJava")  #Rwordseg的依赖
install.packages("rJava")
install.packages("Rwordseg")
install.packages("rJava")
library(tmcn)
library(Rwordseg)
install.packages("Rwordseg",repos="http://R-Forge.R-project.org")
install.packages("rJava")
library(Rwordseg)
install.packages("~/Library/Mobile Documents/com~apple~CloudDocs/edin-courses/输入/R/rpackages/Rwordseg/R/Rwordseg", repos = NULL)
library(Rwordseg)
install.packages("Rwordseg",repos="http://R-Forge.R-project.org")
?rJava
??rJava
Sys.setenv(JAVA_HOME="/Applications/Java")
#/Applications/Java /Applications/Java/JavaVirtualMachines/jdk-14.0.1.jdk
Sys.setenv(JAVA_HOME="/Applications/Java")
install.packages("rJava")
?rJava
install.packages("Rwordseg",repos="http://R-Forge.R-project.org")
